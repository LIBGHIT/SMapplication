<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">

    <title>Smart maint</title>

    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="robots" content="">

    <!-- Open Graph Meta -->
    <meta property="og:title" content="">
    <meta property="og:site_name" content="">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:image" content="">

    <link rel="shortcut icon" type="image/x-icon" th:href="@{/assets/img/favicon.png}">


    <!-- Stylesheets -->
    <link rel="stylesheet" id="css-main" th:href="@{/assets/admincss/dashmix.min.css}">
    <!-- END Stylesheets -->
</head>
<body>
<div id="page-container" class="sidebar-o sidebar-dark enable-page-overlay side-scroll page-header-fixed main-content-narrow">
    <!-- Side Overlay-->
    <div th:insert="side-overlay.html"></div>
    <!-- END Side Overlay -->

    <!-- Sidebar -->
    <div th:insert="sidebar.html"></div>
    <!-- END Sidebar -->

    <!-- Header -->
    <div th:insert="headerAdmin.html"></div>
    <!-- END Header -->

            <!-- Main Container -->
            <main id="main-container">
                <!-- Hero -->
                <div class="bg-body-light">
                    <div class="content content-full">
                        <div class="d-flex flex-column flex-sm-row justify-content-sm-between align-items-sm-center">
                            <h1 class="flex-sm-fill font-size-h2 font-w400 mt-2 mb-0 mb-sm-2">Manage Posts</h1>
                            <nav class="flex-sm-00-auto ml-sm-3" aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item">Posts</li>
                                    <li class="breadcrumb-item">Blog</li>
                                    <li class="breadcrumb-item active" aria-current="page">Manage</li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
                <!-- END Hero -->

                <!-- Page Content -->
                <div class="content content-full">
                    <!-- Posts Statistics -->
                    <div class="row text-center">
                        <div class="col-6 col-xl-3">
                            <!-- All Posts -->
                            <a class="block block-rounded" th:classappend="${module == 'blogposts' ? 'active' : ''}" th:href="@{/blogposts}">
                                <div class="block-content block-content-full">
                                    <div class="py-md-3">
                                        <div class="py-3 d-none d-md-block">
                                            <i class="far fa-2x fa-file-alt opacity-50"></i>
                                        </div>
                                        <p class="font-size-h3 font-w700 mb-0">
                                            [[${totalBlogs}]]
                                        </p>
                                        <p class="text-muted mb-0">
                                            All Posts
                                        </p>
                                    </div>
                                </div>
                            </a>
                            <!-- END All Posts -->
                        </div>
                        <div class="col-6 col-xl-3">
                            <!-- Active Posts -->
                            <a class="block block-rounded" th:classappend="${module == 'blogposts' ? 'active' : ''}" th:href="@{/blogposts}">
                                <div class="block-content block-content-full">
                                    <div class="py-md-3">
                                        <div class="py-3 d-none d-md-block">
                                            <i class="far fa-2x fa-eye opacity-50"></i>
                                        </div>
                                        <p class="font-size-h3 font-w700 mb-0">
                                            [[${totalActiveBlogs}]]
                                        </p>
                                        <p class="text-muted mb-0">
                                            Active
                                        </p>
                                    </div>
                                </div>
                            </a>
                            <!-- END Active Posts -->
                        </div>
                        <div class="col-6 col-xl-3">
                            <!-- comments Posts -->
                            <a class="block block-rounded" href="">
                                <div class="block-content block-content-full">
                                    <div class="py-md-3">
                                        <div class="py-3 d-none d-md-block">
                                            <i class="fa fa-2x fa-comment opacity-50"></i>
                                        </div>
                                        <p class="font-size-h3 font-w700 mb-0">
                                            10
                                        </p>
                                        <p class="text-muted mb-0">
                                            comments
                                        </p>
                                    </div>
                                </div>
                            </a>
                            <!-- END Draft Posts -->
                        </div>
                        <div class="col-6 col-xl-3">
                            <!-- New Post -->
                            <a th:classappend="${module == 'blogadd' ? 'active' : ''}" th:href="@{/blogadd}"  class="block block-rounded">
                                <div class="block-content block-content-full">
                                    <div class="py-md-3">
                                        <div class="py-3 d-none d-md-block">
                                            <i class="fa fa-2x fa-plus text-success-light"></i>
                                        </div>
                                        <p class="font-size-h3 font-w700 mb-0">
                                            <i class="fa fa-plus text-success-light mr-1 d-md-none"></i> New Post
                                        </p>
                                        <p class="text-muted mb-0">
                                            
                                        </p>
                                    </div>
                                </div>
                            </a>
                            <!-- END New Post -->
                        </div>
                    </div>
                    <!-- Post Statistics -->

                    <!-- Posts -->
                    <div class="block">
                        <div class="block-header block-header-default">
                            <h3 class="block-title">Posts ([[${totalBlogs}]])</h3>
                        </div>
                        <div class="block-content">
                            <!-- Search Posts -->
                            <form class="push" action="" method="POST">
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Search Posts..">
                                    <div class="input-group-append">
                                        <span class="input-group-text">
                                            <i class="fa fa-fw fa-search"></i>
                                        </span>
                                    </div>
                                </div>
                            </form>
                            <!-- END Search Posts -->

                            <!-- Posts Table -->
                            <table class="table table-striped table-borderless table-vcenter">
                                <thead class="thead-light">
                                    <tr>
                                        <th style="width: 60px;display: none;">ID</th>
                                        <th style="width: 33%;">Title</th>
                                        <th class="d-none d-sm-table-cell">Subject</th>
                                        <th class="d-none d-xl-table-cell">Published</th>
                                        <th style="width: 100px;" class="text-center">Actions</th>
                                    </tr>
                                </thead>
                                <tbody th:each="blog : ${blogs}">
                                    <tr>
                                        <td  th:text="${blog.id_blog}" style="display: none;"> </td>
                                        <td>
                                            <i th:class="${blog.archived} ? 'fa fa-eye text-danger mr-1' : 'fa fa-eye text-success mr-1'"></i>
                                            <a th:text="${blog.title}"></a>
                                        </td>
                                        <td class="d-none d-sm-table-cell">
                                            <a  th:text="${blog.subject}"></a>
                                        </td>

                                        <td class="d-none d-xl-table-cell" th:text="${#dates.format(blog.date, 'dd MMM yyyy')}">
                                        </td>
                                        <td class="text-center" style="width: 150px;">
                                            <a class="btn btn-sm btn-light"  th:href="@{/blogedit/{id}(id=${blog.id_blog})}">
                                                <i class="fa fa-fw fa-pencil-alt text-primary" title="edit"></i>
                                            </a>
                                            <a class="btn btn-sm btn-light" th:href="@{/deleteBlog/{id}(id=${blog.id_blog})}" onclick="return confirm('Voulez-vous vraiment supprimer cet article ?')">
                                                <i class="fa fa-fw fa-times text-danger" title="delete"></i>
                                            </a>

                                            <a class="btn btn-sm btn-light" th:href="@{/toggleArchiveBlog/{id}(id=${blog.id_blog})}">
                                                <i th:class="${blog.archived} ? 'fas fa-fw fa-folder-open' : 'fas fa-fw fa-archive'"
                                                   th:title="${blog.archived} ? 'Unarchive' : 'Archive'"></i>
                                            </a>


                                        </td>
                                    </tr>
                                    </tbody>
                            </table>
                            <!-- END Posts Table -->

                            <!-- Posts Pagincation -->
                            <nav aria-label="Posts Navigation">
                                <ul class="pagination justify-content-end">
                                    <li class="page-item">
                                        <a class="page-link" th:href="@{${'blogmanage'}(page=0, size=${size})}" tabindex="-1" aria-label="Previous">

                                            <span aria-hidden="true">
                                <i class="fa fa-angle-double-left"></i>
                                            </span>
                                            <span class="sr-only">Previous</span>
                                        </a>
                                    </li>
                                    <li th:each="i : ${#numbers.sequence(0, totalPages - 1)}" th:class="${currentPage == i ? 'page-item active' : 'page-item'}">
                                        <a class="page-link" th:href="@{${'blogmanage'}(page=${i}, size=${size})}" th:text="${i + 1}"></a>
                                    </li>

                                    <li class="page-item">
                                        <a class="page-link" th:href="@{${'blogmanage'}(page=${totalPages - 1}, size=${size})}" aria-label="Next">
                                           <span aria-hidden="true">
                                       <i class="fa fa-angle-double-right"></i>
                                           </span>
                                            <span class="sr-only">Next</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>

                            <!-- END Posts Pagincation -->
                        </div>
                    </div>
                    <!-- END Posts -->
                </div>
                <!-- END Page Content -->
            </main>
            <!-- END Main Container -->

            <!-- Footer -->
            <footer id="page-footer" class="bg-body-light">
                <div class="content py-0">
                    <div class="row font-size-sm">
                        
                        <div class="col-sm-6 order-sm-1 text-center text-sm-left">
                            <a class="font-w600"  target="_blank">Smart maint</a> &copy; <span data-toggle="year-copy"></span>
                        </div>
                    </div>
                </div>
            </footer>
            <!-- END Footer -->
        </div>
        <!-- END Page Container -->


        <script th:src="@{/assets/adminjs/dashmix.core.min.js}"></script>


        <script th:src="@{/assets/adminjs/dashmix.app.min.js}"></script>

    </body>
</html>
